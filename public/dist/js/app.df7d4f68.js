(function(t){function e(e){for(var a,o,c=e[0],i=e[1],u=e[2],l=0,h=[];l<c.length;l++)o=c[l],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&h.push(n[o][0]),n[o]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a]);d&&d(e);while(h.length)h.shift()();return r.push.apply(r,u||[]),s()}function s(){for(var t,e=0;e<r.length;e++){for(var s=r[e],a=!0,c=1;c<s.length;c++){var i=s[c];0!==n[i]&&(a=!1)}a&&(r.splice(e--,1),t=o(o.s=s[0]))}return t}var a={},n={app:0},r=[];function o(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=a,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(s,a,function(e){return t[e]}.bind(null,a));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var d=i;r.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("cd49")},"5c0b":function(t,e,s){"use strict";var a=s("9c0c"),n=s.n(a);n.a},"9c0c":function(t,e,s){},cd49:function(t,e,s){"use strict";s.r(e);var a=s("2b0e"),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("Header"),s("router-view"),s("Footer")],1)},r=[],o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header"},[s("md-toolbar",{attrs:{"md-elevation":1}},[s("h3",{staticClass:"md-title",staticStyle:{flex:"1"},domProps:{innerHTML:t._s(t.pageTitle)}}),s("md-button",{staticClass:"md-icon-button md-primary",on:{click:function(e){return t.back()}}},[s("md-icon",[t._v("undo")])],1)],1)],1)},c=[],i=s("9ab4"),u=s("2f62"),d=s("8c4f"),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"purchases"},["loading"===t.status?s("md-progress-spinner",{attrs:{"md-mode":"indeterminate"}}):s("div",{staticClass:"inner"},[s("div",{staticClass:"centered"},[s("md-speed-dial",{staticClass:"add_purchases"},[s("md-speed-dial-target",{on:{click:function(e){t.showCreateDialog=!0}}},[s("md-icon",[t._v("add")])],1)],1)],1),t.purchasesNum?s("div",{staticClass:"purchases_list"},t._l(t.purchases,(function(e,a){return s("md-list",{key:a},[s("md-list-item",[s("span",{staticClass:"md-list-item-text",domProps:{innerHTML:t._s(e.name)}}),s("md-field",[s("md-input",{on:{keyup:function(s){return t.updatePurchases(e)}},model:{value:e.name,callback:function(s){t.$set(e,"name",s)},expression:"purchase.name"}})],1),s("md-button",{staticClass:"md-icon-button md-list-action",on:{click:function(s){return t.$router.push("/list/"+e._id)}}},[s("md-icon",[t._v("arrow_forward")])],1),s("md-button",{staticClass:"md-icon-button md-list-action",on:{click:function(s){return t.deletePurchases(e._id,a)}}},[s("md-icon",[t._v("delete")])],1)],1)],1)})),1):s("md-empty-state",{staticClass:"md-primary",attrs:{"md-icon":"list","md-label":"Nothing here","md-description":"Create new purchases list."}})],1),s("md-dialog-prompt",{attrs:{"md-active":t.showCreateDialog,"md-title":"Purchase list name","md-input-maxlength":"30","md-input-placeholder":"List name","md-confirm-text":"Save"},on:{"update:mdActive":function(e){t.showCreateDialog=e},"update:md-active":function(e){t.showCreateDialog=e},"md-confirm":t.savePurchases},model:{value:t.purchasesList,callback:function(e){t.purchasesList=e},expression:"purchasesList"}})],1)},h=[],m=s("2ef0"),p=s.n(m),f=a["default"].extend({name:"Purchases",data:function(){return{purchasesList:"",showCreateDialog:!1}},mounted:function(){this.getPurchases()},computed:Object(i["a"])({},Object(u["b"])({status:function(t){return t.purchases.status},purchases:function(t){return t.purchases.purchases},page:function(t){return t.purchases.page},purchasesNum:function(t){return t.purchases.purchases.length}})),methods:{getPurchases:function(){this.$store.dispatch("purchases/getPurchases")},savePurchases:function(){var t=this;t.$store.dispatch("purchases/savePurchases",{name:t.purchasesList}).then((function(e){t.purchasesList=""}))},deletePurchases:function(t,e){var s=this;if(!confirm("Delete this purchases list?"))return!1;s.$store.dispatch("purchases/deletePurchases",{id:t,key:e})},updatePurchases:p.a.throttle((function(t){this.$store.dispatch("purchases/updatePurchases",{id:t._id,name:t.name})}))}}),g=f,v=s("2877"),b=Object(v["a"])(g,l,h,!1,null,null,null),_=b.exports,w=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"purchase"},["loading"===t.status?s("md-progress-spinner",{attrs:{"md-mode":"indeterminate"}}):s("div",{staticClass:"inner"},[s("div",{staticClass:"centered"},[s("md-speed-dial",{staticClass:"add_purchases"},[s("md-speed-dial-target",{on:{click:function(e){t.showCreateDialog=!0}}},[s("md-icon",[t._v("add")])],1)],1)],1),t.purchasesNum?s("div",{staticClass:"purchases_list"},[s("md-table",{attrs:{"md-card":""}},t._l(t.purchases,(function(e,a){return s("md-table-row",{key:a,class:{"md-selected-single md-primary":e["completed"]},attrs:{"md-selectable":"single"},on:{click:function(s){return t.completePurchase(e)}}},[s("md-table-cell",{attrs:{"md-label":"Name"}},[t._v(t._s(e.name))]),s("md-table-cell",{staticClass:"delete",attrs:{"md-label":"Delete"}},[s("md-button",{staticClass:"md-icon-button md-list-action",on:{click:function(s){return t.deletePurchases(e._id,a)}}},[s("md-icon",[t._v("delete")])],1)],1)],1)})),1)],1):s("md-empty-state",{staticClass:"md-primary",attrs:{"md-icon":"list","md-label":"Nothing here","md-description":"Create new purchase in list."}})],1),s("md-dialog-prompt",{attrs:{"md-active":t.showCreateDialog,"md-title":"Purchase name","md-input-maxlength":"30","md-input-placeholder":"Enter purchase name","md-confirm-text":"Save"},on:{"update:mdActive":function(e){t.showCreateDialog=e},"update:md-active":function(e){t.showCreateDialog=e},"md-confirm":t.savePurchases},model:{value:t.purchasesList,callback:function(e){t.purchasesList=e},expression:"purchasesList"}})],1)},P=[],k=a["default"].extend({name:"Purchases",data:function(){return{purchasesList:"",showCreateDialog:!1}},mounted:function(){this.getPurchases()},computed:Object(i["a"])({},Object(u["b"])({status:function(t){return t.purchase.status},purchases:function(t){return t.purchase.purchases},page:function(t){return t.purchase.page},purchasesNum:function(t){return t.purchase.purchases.length}})),methods:{listID:function(){return this.$route.params.list_id},getPurchases:function(){var t=this;this.$store.dispatch("purchase/getPurchase",{list_id:t.listID()})},savePurchases:function(){var t=this;t.$store.dispatch("purchase/savePurchase",{name:t.purchasesList,list_id:t.listID()}).then((function(e){t.purchasesList=""}))},deletePurchases:function(t,e){var s=this;if(!confirm("Delete this purchases list?"))return!1;s.$store.dispatch("purchase/deletePurchase",{id:t,key:e,list_id:s.listID()})},updatePurchases:p.a.throttle((function(t){var e=this;this.$store.dispatch("purchase/updatePurchase",{id:t._id,name:t.name,list_id:e.listID()})})),completePurchase:function(t){var e=this,s=!t["completed"];this.$store.dispatch("purchase/purchaseStatus",{id:t._id,name:t.name,list_id:e.listID(),completed:s}),e.$set(t,"completed",s)}}}),y=k,C=Object(v["a"])(y,w,P,!1,null,null,null),x=C.exports,$=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login"},[s("div",{staticClass:"container",class:[t.status]},[s("div",{staticClass:"md-layout md-gutter"},[s("div",{staticClass:"md-layout-item"},[s("md-field",[s("label",[t._v("Email")]),s("md-input",{attrs:{name:"email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),t.isRegistering?s("md-field",[s("label",[t._v("Name")]),s("md-input",{attrs:{name:"name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1):t._e(),s("md-field",[s("label",[t._v("Password")]),s("md-input",{attrs:{type:"password",name:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t.isRegistering?s("md-field",[s("label",[t._v("Repeat Password")]),s("md-input",{attrs:{type:"password",name:"password"},model:{value:t.passwordRepeat,callback:function(e){t.passwordRepeat=e},expression:"passwordRepeat"}})],1):t._e(),t.isRegistering?s("md-card-actions",{attrs:{"md-alignment":"space-between"}},[s("md-button",{staticClass:"md-raised md-primary",on:{click:t.register}},[t._v("Register")]),s("md-button",{staticClass:"md-primary",on:{click:t.loginAccount}},[t._v("I have an account")])],1):s("md-card-actions",{attrs:{"md-alignment":"space-between"}},[s("md-button",{staticClass:"md-raised md-primary",on:{click:t.login}},[t._v("Login")]),s("md-button",{staticClass:"md-primary",on:{click:t.createAccount}},[t._v("Create account")])],1)],1)]),s("md-snackbar",{attrs:{"md-position":"center","md-duration":4e3,"md-active":t.showSnackbar,"md-persistent":""},on:{"update:mdActive":function(e){t.showSnackbar=e},"update:md-active":function(e){t.showSnackbar=e}}},[s("span",{domProps:{innerHTML:t._s(t.message)}})])],1)])},O=[],S=s("bc3a"),T=s.n(S);const L={url:"http://5.53.125.129/",token:localStorage.getItem("token")||""};var j=L,D={namespaced:!0,state:{message:"",status:"",token:j.token,user:{}},getters:{},mutations:{clear_state:function(t){t.message=t.status=""},auth_request:function(t){t.status="loading",t.message="Loading"},auth_success:function(t,e){localStorage.setItem("token",e),t.status="success",t.message="Successfully logged in, redirecting",t.token=e},auth_error:function(t,e){t.status="error",t.message=e.data.message,401===e.status&&(localStorage.removeItem("token"),location.reload())},change_message:function(t,e){t.message=e}},actions:{login:function(t,e){var s=t.commit;return s("clear_state"),new Promise((function(t,a){s("auth_request"),T()({url:j.url+"login",data:e,method:"POST"}).then((function(e){var a=e.data.data;T.a.defaults.headers.common["Authorization"]="Bearer "+a,s("auth_success",a),t(e)})).catch((function(t){s("auth_error",t.response),a(t)}))}))},registration:function(t,e){var s=t.commit;return s("clear_state"),new Promise((function(t,a){s("auth_request"),T()({url:j.url+"registration",data:e,method:"POST"}).then((function(e){var a=e.data.data;T.a.defaults.headers.common["Authorization"]="Bearer "+a,s("auth_success",a),t(e)})).catch((function(t){s("auth_error",t.response),a(t)}))}))}}},E=D,R={namespaced:!0,state:{status:"",purchases:[],page:1},getters:{},mutations:{loading:function(t){t.status="loading"},add_purchases:function(t,e){t.status="success",t.purchases.push(e)},get_purchases:function(t,e){t.status="success",t.purchases=e},delete_purchases:function(t,e){t.status="success",t.purchases.splice(e.key,1)}},actions:{getPurchases:function(t,e){var s=t.commit;return s("loading"),new Promise((function(t,a){T()({url:j.url+"purchases",data:e,method:"GET"}).then((function(e){s("get_purchases",e.data.data),t(e)})).catch((function(t){s("auth/auth_error",t.response,{root:!0}),a(t)}))}))},savePurchases:function(t,e){var s=t.commit;return s("loading"),new Promise((function(t,a){T()({url:j.url+"purchases",data:e,method:"POST"}).then((function(e){s("add_purchases",e.data.data),t(e)})).catch((function(t){s("auth/auth_error",t.response,{root:!0}),a(t)}))}))},deletePurchases:function(t,e){var s=t.commit;return s("loading"),new Promise((function(t,a){T()({url:j.url+"purchases",data:e,method:"DELETE"}).then((function(a){s("delete_purchases",e),t(a)})).catch((function(t){s("auth/auth_error",t.response,{root:!0}),a(t)}))}))},updatePurchases:function(t,e){var s=t.commit;return new Promise((function(t,a){T()({url:j.url+"purchases",data:e,method:"PUT"}).then((function(e){t(e)})).catch((function(t){s("auth/auth_error",t.response,{root:!0}),a(t)}))}))}}},A=R,I={namespaced:!0,state:{status:"",purchases:[],page:1},getters:{},mutations:{loading:function(t){t.status="loading"},add_purchase:function(t,e){t.status="success",t.purchases.push(e)},get_purchase:function(t,e){t.status="success",t.purchases=e},delete_purchase:function(t,e){t.status="success",t.purchases.splice(e.key,1)}},actions:{getPurchase:function(t,e){var s=t.commit;return s("loading"),console.log(e),new Promise((function(t,a){T()({url:j.url+"purchase",params:e,method:"GET"}).then((function(e){s("get_purchase",e.data.data),t(e)})).catch((function(t){s("auth/auth_error",t.response,{root:!0}),a(t)}))}))},savePurchase:function(t,e){var s=t.commit;return s("loading"),new Promise((function(t,a){T()({url:j.url+"purchase",data:e,method:"POST"}).then((function(e){s("add_purchase",e.data.data),t(e)})).catch((function(t){s("auth/auth_error",t.response,{root:!0}),a(t)}))}))},deletePurchase:function(t,e){var s=t.commit;return s("loading"),new Promise((function(t,a){T()({url:j.url+"purchase",data:e,method:"DELETE"}).then((function(a){s("delete_purchase",e),t(a)})).catch((function(t){s("auth/auth_error",t.response,{root:!0}),a(t)}))}))},updatePurchase:function(t,e){var s=t.commit;return new Promise((function(t,a){T()({url:j.url+"purchase",data:e,method:"PUT"}).then((function(e){t(e)})).catch((function(t){s("auth/auth_error",t.response,{root:!0}),a(t)}))}))},purchaseStatus:function(t,e){var s=t.commit;return new Promise((function(t,a){T()({url:j.url+"purchase_status",data:e,method:"PUT"}).then((function(e){t(e)})).catch((function(t){s("auth/auth_error",t.response,{root:!0}),a(t)}))}))}}},N=I;a["default"].use(u["a"]);var M=new u["a"].Store({modules:{auth:E,purchases:A,purchase:N},state:{pageTitle:"Purchases",isAppLoading:!1},mutations:{changeTitle:function(t,e){t.pageTitle=e}},actions:{}}),H=a["default"].extend({name:"Login",data:function(){return{isRegistering:!1,showSnackbar:!1,name:"",email:"",password:"",passwordRepeat:""}},mounted:function(){},computed:Object(i["a"])({},Object(u["b"])({status:function(t){return t.auth.status},message:function(t){return t.auth.message}})),methods:{register:function(){var t=this,e=this.email,s=this.name,a=this.password,n=this.passwordRepeat;if(a!==n)return M.commit("auth/change_message","Passwords do not match"),this.showShack(),!1;this.$store.dispatch("auth/registration",{email:e,name:s,password:a}).then((function(){t.$router.push("/")})).catch((function(t){return console.log(t)})),this.showShack()},login:function(){var t=this,e=this.email,s=this.password;this.$store.dispatch("auth/login",{email:e,password:s}).then((function(){t.$router.push("/")})).catch((function(t){return console.log(t)})),this.showShack()},createAccount:function(){this.isRegistering=!0,M.commit("changeTitle","Register")},loginAccount:function(){this.isRegistering=!1,M.commit("changeTitle","Login")},showShack:function(){this.$set(this,"showSnackbar",!0)}}}),q=H,z=Object(v["a"])(q,$,O,!1,null,null,null),B=z.exports;a["default"].use(d["a"]);var F=[{path:"/",name:"Purchases",component:_},{path:"/list/:list_id",meta:{path:"list/"},name:"List purchases",component:x},{path:"/login",name:"Login",component:B}],U=new d["a"]({mode:"history",routes:F});U.beforeEach((function(t,e,s){localStorage.getItem("token")||"/login"===t.path?s():s({path:"/login"})})),U.afterEach((function(t){var e=t["matched"].length?t["matched"][0]:[];e&&M.commit("changeTitle",e.name)}));var G=U,J=a["default"].extend({name:"Header",computed:Object(i["a"])({},Object(u["b"])({pageTitle:function(t){return t.pageTitle}})),methods:{back:function(){G.go(-1)}}}),K=J,Q=Object(v["a"])(K,o,c,!1,null,null,null),V=Q.exports,W=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"footer"},[s("md-bottom-bar",{attrs:{"md-type":"shift"}},[s("md-bottom-bar-item",{attrs:{id:"bottom-bar-item-home","md-icon":"list"},on:{click:function(e){return t.goToRoute("/")}}}),s("md-bottom-bar-item",{attrs:{id:"bottom-bar-item-home","md-icon":"account_box"},on:{click:function(e){return t.goToRoute("/login")}}})],1)],1)},X=[],Y=a["default"].extend({name:"Footer",computed:{currentPath:function(){return this.$route.path}},mounted:function(){},methods:{goToRoute:function(t){t!==this.$route.path&&this.$router.push(t)}}}),Z=Y,tt=Object(v["a"])(Z,W,X,!1,null,null,null),et=tt.exports,st={name:"App",components:{Header:V,Footer:et}},at=st,nt=(s("5c0b"),Object(v["a"])(at,n,r,!1,null,null,null)),rt=nt.exports,ot=s("43f9"),ct=s.n(ot);s("51de"),s("e094");a["default"].use(ct.a),a["default"].prototype.$http=T.a,j.token&&(a["default"].prototype.$http.defaults.headers.common["Authorization"]="Bearer "+j.token),a["default"].config.productionTip=!1,new a["default"]({router:G,store:M,render:function(t){return t(rt)}}).$mount("#app")}});
//# sourceMappingURL=app.df7d4f68.js.map