(function(t){function e(e){for(var n,r,i=e[0],c=e[1],u=e[2],d=0,m=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&m.push(s[r][0]),s[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(m.length)m.shift()();return o.push.apply(o,u||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,i=1;i<a.length;i++){var c=a[i];0!==s[c]&&(n=!1)}n&&(o.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},s={app:0},o=[];function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("cd49")},"5c0b":function(t,e,a){"use strict";var n=a("9c0c"),s=a.n(n);s.a},"9c0c":function(t,e,a){},cd49:function(t,e,a){"use strict";a.r(e);var n=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("Header"),a("router-view")],1)},o=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header"},[a("md-toolbar",{attrs:{"md-elevation":1}},[a("h3",{staticClass:"md-title",staticStyle:{flex:"1"},domProps:{innerHTML:t._s(t.pageTitle)}}),a("md-button",{staticClass:"md-icon-button md-primary",on:{click:function(e){return t.back()}}},[a("md-icon",[t._v("undo")])],1)],1)],1)},i=[],c=a("9ab4"),u=a("2f62"),l=a("8c4f"),d=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},m=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"purchases"},[a("div",{staticClass:"container"})])}],p=a("bc3a"),f=a.n(p);const h={url:"http://5.53.125.129/",token:localStorage.getItem("token")||""};var g=h,v={namespaced:!0,state:{message:"",status:"",token:g.token,user:{}},getters:{},mutations:{clear_state:function(t){t.message=t.status=""},auth_request:function(t){t.status="loading",t.message="Loading"},auth_success:function(t,e){localStorage.setItem("token",e),t.status="success",t.message="Successfully logged in, redirecting",t.token=e},auth_error:function(t,e){t.status="error",t.message=e.message,localStorage.removeItem("token")},change_message:function(t,e){t.message=e}},actions:{login:function(t,e){var a=t.commit;return a("clear_state"),new Promise((function(t,n){a("auth_request"),f()({url:g.url+"login",data:e,method:"POST"}).then((function(e){var n=e.data.data;f.a.defaults.headers.common["Authorization"]=n,a("auth_success",n),t(e)})).catch((function(t){a("auth_error",t.response.data),n(t)}))}))},registration:function(t,e){var a=t.commit;return a("clear_state"),new Promise((function(t,n){a("auth_request"),f()({url:g.url+"registration",data:e,method:"POST"}).then((function(e){var n=e.data.data;f.a.defaults.headers.common["Authorization"]=n,a("auth_success",n),t(e)})).catch((function(t){a("auth_error",t.response.data),n(t)}))}))}}},b=v;n["default"].use(u["a"]);var w=new u["a"].Store({modules:{auth:b},state:{pageTitle:"Home",isAppLoading:!1},mutations:{changeTitle:function(t,e){t.pageTitle=e}},actions:{}}),_=n["default"].extend({name:"Purchases",data:function(){return{}},mounted:function(){w.commit("changeTitle","Purchases")},computed:{},methods:{}}),k=_,y=a("2877"),S=Object(y["a"])(k,d,m,!1,null,null,null),O=S.exports,x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login"},[a("div",{staticClass:"container",class:[t.status]},[a("div",{staticClass:"md-layout md-gutter"},[a("div",{staticClass:"md-layout-item"},[a("md-field",[a("label",[t._v("Email")]),a("md-input",{attrs:{name:"email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),t.isRegistering?a("md-field",[a("label",[t._v("Name")]),a("md-input",{attrs:{name:"name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1):t._e(),a("md-field",[a("label",[t._v("Password")]),a("md-input",{attrs:{type:"password",name:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t.isRegistering?a("md-field",[a("label",[t._v("Repeat Password")]),a("md-input",{attrs:{type:"password",name:"password"},model:{value:t.passwordRepeat,callback:function(e){t.passwordRepeat=e},expression:"passwordRepeat"}})],1):t._e(),t.isRegistering?a("md-card-actions",{attrs:{"md-alignment":"space-between"}},[a("md-button",{staticClass:"md-raised md-primary",on:{click:t.register}},[t._v("Register")]),a("md-button",{staticClass:"md-primary",on:{click:t.loginAccount}},[t._v("I have an account")])],1):a("md-card-actions",{attrs:{"md-alignment":"space-between"}},[a("md-button",{staticClass:"md-raised md-primary",on:{click:t.login}},[t._v("Login")]),a("md-button",{staticClass:"md-primary",on:{click:t.createAccount}},[t._v("Create account")])],1)],1)]),a("md-snackbar",{attrs:{"md-position":"center","md-duration":4e3,"md-active":t.showSnackbar,"md-persistent":""},on:{"update:mdActive":function(e){t.showSnackbar=e},"update:md-active":function(e){t.showSnackbar=e}}},[a("span",{domProps:{innerHTML:t._s(t.message)}})])],1)])},P=[],j=n["default"].extend({name:"Login",data:function(){return{isRegistering:!1,showSnackbar:!1,name:"",email:"",password:"",passwordRepeat:""}},mounted:function(){w.commit("changeTitle","Login")},computed:Object(c["a"])({},Object(u["b"])({status:function(t){return t.auth.status},message:function(t){return t.auth.message}})),methods:{register:function(){var t=this,e=this.email,a=this.name,n=this.password,s=this.passwordRepeat;if(n!==s)return w.commit("auth/change_message","Passwords do not match"),this.showShack(),!1;this.$store.dispatch("auth/registration",{email:e,name:a,password:n}).then((function(){t.$router.push("/")})).catch((function(t){return console.log(t)})),this.showShack()},login:function(){var t=this,e=this.email,a=this.password;this.$store.dispatch("auth/login",{email:e,password:a}).then((function(){t.$router.push("/")})).catch((function(t){return console.log(t)})),this.showShack()},createAccount:function(){this.isRegistering=!0,w.commit("changeTitle","Register")},loginAccount:function(){this.isRegistering=!1,w.commit("changeTitle","Login")},showShack:function(){this.$set(this,"showSnackbar",!0)}}}),T=j,C=Object(y["a"])(T,x,P,!1,null,null,null),R=C.exports;n["default"].use(l["a"]);var $=[{path:"/",name:"Home",component:O},{path:"/login",name:"Login",component:R}],A=new l["a"]({routes:$});A.beforeEach((function(t,e,a){localStorage.getItem("token")||"/login"===t.path?a():a({path:"/login"})}));var L=A,E=n["default"].extend({name:"Header",computed:Object(c["a"])({},Object(u["b"])({pageTitle:function(t){return t.pageTitle}})),methods:{back:function(){L.go(-1)}}}),H=E,M=Object(y["a"])(H,r,i,!1,null,null,null),I=M.exports,q={name:"App",components:{Header:I}},z=q,J=(a("5c0b"),Object(y["a"])(z,s,o,!1,null,null,null)),N=J.exports,B=a("43f9"),D=a.n(B);a("51de"),a("e094");n["default"].use(D.a),n["default"].prototype.$http=f.a,g.token&&(n["default"].prototype.$http.defaults.headers.common["Authorization"]=g.token),n["default"].config.productionTip=!1,new n["default"]({router:L,store:w,render:function(t){return t(N)}}).$mount("#app")}});
//# sourceMappingURL=app.38ed8fdc.js.map